import{k as M,m as G,l as E,r as y,u as U,a as t,n as p,i as W,v as ee,I as K,E as Q,q as ye,s as be,x as xe,y as Ve,z as pe,A as _e,B as Ce,F as D,C as z,D as he,G as ke,H as Ie,J as Fe,K as Pe,L as Se,M as ae,N as we,_ as Be,O as Le,P as Re,d as Te,o as $e,f as Ae,w as B,Q as De,b as Y,t as ne,R as Me,p as Ee,j as Ue,g as se}from"./index-6be6cdf3.js";import{u as Ne}from"./scopeId-67db5520.js";import{s as Oe}from"./svgLogo-5e63bca1.js";import{f as re,n as je,a as qe,s as ze,_ as Ge}from"./uiSnackbar-1a6355dc.js";import{m as We,a as Xe,M as He,b as Je,c as Ke,u as Qe,d as Ye,e as Ze,f as et,L as tt,g as lt,I as at,h as nt,i as it}from"./index-70cc0917.js";import{m as ot,c as st,V as rt,a as ut,u as ue,b as dt,d as ct,e as ie}from"./VInput-5894b52a.js";import{a as ft,b as vt}from"./VCard-6c206f25.js";import{V as Z}from"./VBtn-6cf66a7b.js";import"./lazy-cbab3db1.js";import"./tag-a4458703.js";const mt=M({...G(),...ot()},"VForm"),gt=E()({name:"VForm",props:mt(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,u){let{slots:i,emit:v}=u;const l=st(e),o=y();function m(s){s.preventDefault(),l.reset()}function d(s){const c=s,f=l.validate();c.then=f.then.bind(f),c.catch=f.catch.bind(f),c.finally=f.finally.bind(f),v("submit",c),c.defaultPrevented||f.then(P=>{var a;let{valid:S}=P;S&&((a=o.value)==null||a.submit())}),c.preventDefault()}return U(()=>{var s;return t("form",{ref:o,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:m,onSubmit:d},[(s=i.default)==null?void 0:s.call(i,l)])}),re(l,o)}});const yt=M({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...G(),...We({transition:{component:Xe}})},"VCounter"),bt=E()({name:"VCounter",functional:!0,props:yt(),setup(e,u){let{slots:i}=u;const v=p(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return U(()=>t(He,{transition:e.transition},{default:()=>[W(t("div",{class:["v-counter",e.class],style:e.style},[i.default?i.default({counter:v.value,max:e.max,value:e.value}):v.value]),[[ee,e.active]])]})),{}}});const xt=M({floating:Boolean,...G()},"VFieldLabel"),q=E()({name:"VFieldLabel",props:xt(),setup(e,u){let{slots:i}=u;return U(()=>t(rt,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},i)),{}}}),Vt=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],de=M({appendInnerIcon:K,bgColor:String,clearable:Boolean,clearIcon:{type:K,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:K,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Vt.includes(e)},"onClick:clear":Q(),"onClick:appendInner":Q(),"onClick:prependInner":Q(),...G(),...Je(),...Ke(),...ye()},"VField"),ce=E()({name:"VField",inheritAttrs:!1,props:{id:String,...ut(),...de()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{attrs:i,emit:v,slots:l}=u;const{themeClasses:o}=be(e),{loaderClasses:m}=Qe(e),{focusClasses:d,isFocused:s,focus:c,blur:f}=ue(e),{InputIcon:P}=dt(e),{roundedClasses:S}=Ye(e),{rtlClasses:a}=xe(),r=p(()=>e.dirty||e.active),h=p(()=>!e.singleLine&&!!(e.label||l.label)),X=Ve(),b=p(()=>e.id||`input-${X}`),H=p(()=>`${b.value}-messages`),N=y(),L=y(),O=y(),n=p(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:_,backgroundColorStyles:C}=Ze(pe(e,"bgColor")),{textColorClasses:k,textColorStyles:te}=et(p(()=>e.error||e.disabled?void 0:r.value&&s.value?e.color:e.baseColor));_e(r,x=>{if(h.value){const g=N.value.$el,I=L.value.$el;requestAnimationFrame(()=>{const F=je(g),V=I.getBoundingClientRect(),T=V.x-F.x,$=V.y-F.y-(F.height/2-V.height/2),w=V.width/.75,A=Math.abs(w-F.width)>1?{maxWidth:Ce(w)}:void 0,j=getComputedStyle(g),le=getComputedStyle(I),ve=parseFloat(j.transitionDuration)*1e3||150,me=parseFloat(le.getPropertyValue("--v-field-label-scale")),ge=le.getPropertyValue("color");g.style.visibility="visible",I.style.visibility="hidden",qe(g,{transform:`translate(${T}px, ${$}px) scale(${me})`,color:ge,...A},{duration:ve,easing:ze,direction:x?"normal":"reverse"}).finished.then(()=>{g.style.removeProperty("visibility"),I.style.removeProperty("visibility")})})}},{flush:"post"});const R=p(()=>({isActive:r,isFocused:s,controlRef:O,blur:f,focus:c}));function J(x){x.target!==document.activeElement&&x.preventDefault()}return U(()=>{var T,$,w;const x=e.variant==="outlined",g=l["prepend-inner"]||e.prependInnerIcon,I=!!(e.clearable||l.clear),F=!!(l["append-inner"]||e.appendInnerIcon||I),V=l.label?l.label({...R.value,label:e.label,props:{for:b.value}}):e.label;return t("div",z({class:["v-field",{"v-field--active":r.value,"v-field--appended":F,"v-field--center-affix":e.centerAffix??!n.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":g,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!V,[`v-field--variant-${e.variant}`]:!0},o.value,_.value,d.value,m.value,S.value,a.value,e.class],style:[C.value,te.value,e.style],onClick:J},i),[t("div",{class:"v-field__overlay"},null),t(tt,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:l.loader}),g&&t("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&t(P,{key:"prepend-icon",name:"prependInner"},null),(T=l["prepend-inner"])==null?void 0:T.call(l,R.value)]),t("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&h.value&&t(q,{key:"floating-label",ref:L,class:[k.value],floating:!0,for:b.value},{default:()=>[V]}),t(q,{ref:N,for:b.value},{default:()=>[V]}),($=l.default)==null?void 0:$.call(l,{...R.value,props:{id:b.value,class:"v-field__input","aria-describedby":H.value},focus:c,blur:f})]),I&&t(lt,{key:"clear"},{default:()=>[W(t("div",{class:"v-field__clearable",onMousedown:A=>{A.preventDefault(),A.stopPropagation()}},[l.clear?l.clear():t(P,{name:"clear"},null)]),[[ee,e.dirty]])]}),F&&t("div",{key:"append",class:"v-field__append-inner"},[(w=l["append-inner"])==null?void 0:w.call(l,R.value),e.appendInnerIcon&&t(P,{key:"append-icon",name:"appendInner"},null)]),t("div",{class:["v-field__outline",k.value]},[x&&t(D,null,[t("div",{class:"v-field__outline__start"},null),h.value&&t("div",{class:"v-field__outline__notch"},[t(q,{ref:L,floating:!0,for:b.value},{default:()=>[V]})]),t("div",{class:"v-field__outline__end"},null)]),n.value&&h.value&&t(q,{ref:L,floating:!0,for:b.value},{default:()=>[V]})])])}),{controlRef:O}}});function pt(e){const u=Object.keys(ce.props).filter(i=>!he(i)&&i!=="class"&&i!=="style");return ke(e,u)}const _t=["color","file","time","date","datetime-local","week","month"],Ct=M({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...ct(),...de()},"VTextField"),oe=E()({name:"VTextField",directives:{Intersect:at},inheritAttrs:!1,props:Ct(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,u){let{attrs:i,emit:v,slots:l}=u;const o=Ie(e,"modelValue"),{isFocused:m,focus:d,blur:s}=ue(e),c=p(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value??"").toString().length),f=p(()=>{if(i.maxlength)return i.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),P=p(()=>["plain","underlined"].includes(e.variant));function S(n,_){var C,k;!e.autofocus||!n||(k=(C=_[0].target)==null?void 0:C.focus)==null||k.call(C)}const a=y(),r=y(),h=y(),X=p(()=>_t.includes(e.type)||e.persistentPlaceholder||m.value||e.active);function b(){var n;h.value!==document.activeElement&&((n=h.value)==null||n.focus()),m.value||d()}function H(n){v("mousedown:control",n),n.target!==h.value&&(b(),n.preventDefault())}function N(n){b(),v("click:control",n)}function L(n){n.stopPropagation(),b(),ae(()=>{o.value=null,we(e["onClick:clear"],n)})}function O(n){var C;const _=n.target;if(o.value=_.value,(C=e.modelModifiers)!=null&&C.trim&&["text","search","password","tel","url"].includes(e.type)){const k=[_.selectionStart,_.selectionEnd];ae(()=>{_.selectionStart=k[0],_.selectionEnd=k[1]})}}return U(()=>{const n=!!(l.counter||e.counter||e.counterValue),_=!!(n||l.details),[C,k]=Fe(i),[{modelValue:te,...R}]=ie.filterProps(e),[J]=pt(e);return t(ie,z({ref:a,modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(e.variant)},e.class],style:e.style},C,R,{centerAffix:!P.value,focused:m.value}),{...l,default:x=>{let{id:g,isDisabled:I,isDirty:F,isReadonly:V,isValid:T}=x;return t(ce,z({ref:r,onMousedown:H,onClick:N,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},J,{id:g.value,active:X.value||F.value,dirty:F.value||e.dirty,disabled:I.value,focused:m.value,error:T.value===!1}),{...l,default:$=>{let{props:{class:w,...A}}=$;const j=W(t("input",z({ref:h,value:o.value,onInput:O,autofocus:e.autofocus,readonly:V.value,disabled:I.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:b,onBlur:s},A,k),null),[[Pe("intersect"),{handler:S},null,{once:!0}]]);return t(D,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[t("span",{class:"v-text-field__prefix__text"},[e.prefix])]),t("div",{class:w,"data-no-activator":""},[l.default?t(D,null,[l.default(),j]):Se(j)]),e.suffix&&t("span",{class:"v-text-field__suffix"},[t("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:_?x=>{var g;return t(D,null,[(g=l.details)==null?void 0:g.call(l,x),n&&t(D,null,[t("span",null,null),t(bt,{active:e.persistentCounter||m.value,value:c.value,max:f.value},l.counter)])])}:void 0})}),re({},a,r,h)}}),fe=e=>(Ee("data-v-4061b8fc"),e=e(),Ue(),e),ht={class:"background pa-8 h-screen d-flex flex-column justify-center align-center"},kt=fe(()=>se("div",{class:"text-subtitle-1 text-medium-emphasis"}," Почта ",-1)),It=fe(()=>se("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"}," Пароль ",-1)),Ft={__name:"LoginView",setup(e){const u=Le(),i=Re(),v=y(!1),l=Ne(),o=y(""),m=y(""),d=y(""),s=y(!1),c=y(!1),f=async(S,a)=>{d.value==="register"?await l.registerUser(S,a):d.value==="login"&&await l.loginUser(S,a),l.isLoggedIn.value?u.back():s.value=!0},P=async()=>{await l.loginWithGoogle(),l.isLoggedIn.value?u.back():s.value=!0};return Te(()=>{l.logoutUser(),d.value=i.query.type,c.value=!0}),(S,a)=>($e(),Ae("div",ht,[t(Oe),t(nt,null,{default:B(()=>[W(t(gt,{onSubmit:a[5]||(a[5]=De(r=>f(o.value,m.value),["prevent"]))},{default:B(()=>[t(ft,{class:"mx-auto pa-8 mt-8 w-100",elevation:"8","min-width":"323","max-width":"600",rounded:"lg"},{default:B(()=>[kt,t(oe,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),density:"compact",placeholder:"Введите почту","prepend-inner-icon":"mdi-email-outline",variant:"outlined",required:""},null,8,["modelValue"]),It,t(oe,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=r=>m.value=r),"append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",type:v.value?"text":"password",density:"compact",placeholder:"Введите пароль","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",required:"","onClick:appendInner":a[2]||(a[2]=r=>v.value=!v.value)},null,8,["modelValue","append-inner-icon","type"]),t(Z,{block:"",type:"submit",class:"mb-2",size:"large",variant:"tonal"},{default:B(()=>[Y(ne(d.value==="register"?"Зарегистрироваться":"Войти"),1)]),_:1}),t(Z,{block:"",class:"mb-2",variant:"tonal",onClick:P},{default:B(()=>[Y(" Войти через Google ")]),_:1}),t(vt,{class:"text-center"},{default:B(()=>[t(Z,{class:"text-decoration-none",variant:"text",size:"small",onClick:a[3]||(a[3]=r=>d.value==="register "?d.value="register":d.value="login")},{default:B(()=>[Y(ne(d.value!=="register"?"Зарегистрироваться":"Войти")+" ",1),t(it,{icon:"mdi-chevron-right"})]),_:1})]),_:1})]),_:1}),t(Ge,{color:"red",modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=r=>s.value=r),message:Me(l).errorMsg.value},null,8,["modelValue","message"])]),_:1},512),[[ee,c.value]])]),_:1})]))}},Mt=Be(Ft,[["__scopeId","data-v-4061b8fc"]]);export{Mt as default};
